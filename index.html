<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Quiz Citas Bíblicas - Selección de Bloque</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
  }
  #quiz-container {
    margin-top: 20px;
  }
</style>
</head>
<body>

<h1>Quiz Citas Bíblicas</h1>

<div id="selector-bloque">
  <label for="bloque-select">Elige un bloque:</label>
  <select id="bloque-select">
    <option value="" disabled selected>Seleccione un bloque</option>
  </select>
  <button id="btn-comenzar" disabled>Comenzar</button>
</div>

<div id="quiz-container" style="display:none;">
  <!-- Aquí se cargarán las preguntas -->
  <p><em>Las preguntas se cargarán aquí...</em></p>
</div>

<script>
// Variables globales
let datosQuiz = null;
let bloqueSeleccionado = null;

// Función para cargar JSON
async function cargarDatos() {
  try {
    const response = await fetch('citas.json');
    if (!response.ok) throw new Error('No se pudo cargar el archivo citas.json');
    datosQuiz = await response.json();
    cargarOpcionesBloques();
  } catch (error) {
    alert('Error cargando datos: ' + error.message);
  }
}

// Rellenar el select con los bloques
function cargarOpcionesBloques() {
  const select = document.getElementById('bloque-select');
  datosQuiz.bloques.forEach((bloque, index) => {
    const option = document.createElement('option');
    option.value = index;
    option.textContent = bloque.nombre;
    select.appendChild(option);
  });
}

// Evento al cambiar selección para habilitar botón comenzar
document.getElementById('bloque-select').addEventListener('change', function () {
  document.getElementById('btn-comenzar').disabled = !this.value;
});

// Evento click en botón comenzar
document.getElementById('btn-comenzar').addEventListener('click', function () {
  const select = document.getElementById('bloque-select');
  const index = select.value;
  bloqueSeleccionado = datosQuiz.bloques[index];

  // Ocultar selector y botón
  document.getElementById('selector-bloque').style.display = 'none';

  // Mostrar el contenedor del quiz
  document.getElementById('quiz-container').style.display = 'block';

  // Cargar preguntas del bloque (por ahora solo mostramos un mensaje)
  mostrarPreguntas();
});

// Función para mostrar las preguntas (simple demo)
function mostrarPreguntas() {
  const contenedor = document.getElementById('quiz-container');
  contenedor.innerHTML = ''; // limpiar

  bloqueSeleccionado.preguntas.forEach((pregunta, i) => {
    const p = document.createElement('p');
    p.textContent = `Pregunta ${i + 1}: ${pregunta.cita}`;
    contenedor.appendChild(p);
  });
}

// Al cargar la página, cargar el JSON
window.onload = cargarDatos;

</script>

</body>
</html>
