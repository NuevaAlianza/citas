<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Quiz B√≠blico por Bloques</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f7f3e9;
    color: #3b2e1e;
    margin: 0; padding: 20px;
    display: flex; flex-direction: column; align-items: center;
  }
  h1 {
    color: #a67c00;
  }
  select, button {
    padding: 8px 15px;
    font-size: 1rem;
    margin: 10px 5px;
    border-radius: 5px;
    border: 1px solid #a67c00;
    background: #f1e4a0;
    cursor: pointer;
  }
  button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
  #quiz-container, #result-container {
    max-width: 600px;
    width: 100%;
    margin-top: 20px;
    background: #fffbea;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px #d6c17f;
  }
  .opciones {
    margin-top: 10px;
  }
  .opcion {
    margin: 8px 0;
  }
  .opcion label {
    cursor: pointer;
  }
  .mensaje-correcto {
    color: green;
    font-weight: bold;
  }
  .mensaje-error {
    color: red;
    font-weight: bold;
  }
</style>
</head>
<body>

<h1>Quiz B√≠blico por Bloques</h1>

<div id="inicio-container">
  <label for="select-bloque">Selecciona un bloque de preguntas:</label>
  <select id="select-bloque">
    <option value="" disabled selected>-- Elige un bloque --</option>
  </select>
  <button id="start-btn" disabled>Comenzar Quiz</button>
</div>

<div id="quiz-container" style="display:none;">
  <div id="pregunta-texto"></div>

  <div>
    <strong>¬øEn qu√© libro est√° esta cita?</strong>
    <div id="opciones-libro" class="opciones"></div>
  </div>

  <div>
    <strong>¬øEn qu√© cap√≠tulo est√° esta cita?</strong>
    <div id="opciones-capitulo" class="opciones"></div>
  </div>

  <button id="btn-siguiente" disabled>Siguiente</button>
</div>

<div id="result-container" style="display:none;">
  <h2>Resultados</h2>
  <p id="mensaje-resultado"></p>
  <button id="btn-reiniciar">Reiniciar mismo bloque</button>
  <button id="btn-volver-inicio">Volver a inicio</button>
</div>

<!-- Sonidos -->
<audio id="sonido-inicio" src="start.mp3"></audio>
<audio id="sonido-correcto" src="correct.mp3"></audio>
<audio id="sonido-incorrecto" src="incorrect.mp3"></audio>

<script>
// Datos de ejemplo con dos bloques (puedes a√±adir m√°s)
const bloques = {
  "Bloque 1": [
    {
      cita: "En el principio cre√≥ Dios los cielos y la tierra.",
      libro: "G√©nesis",
      capitulo: "1",
      opciones_libro: ["√âxodo", "G√©nesis", "Lev√≠tico", "N√∫meros"],
      opciones_capitulo: ["1", "2", "3", "4"]
    },
    {
      cita: "El Se√±or es mi pastor, nada me faltar√°.",
      libro: "Salmos",
      capitulo: "23",
      opciones_libro: ["Salmos", "Proverbios", "Isa√≠as", "Eclesiast√©s"],
      opciones_capitulo: ["22", "23", "24", "25"]
    }
  ],
  "Bloque 2": [
    {
      cita: "Amar√°s a tu pr√≥jimo como a ti mismo.",
      libro: "Lev√≠tico",
      capitulo: "19",
      opciones_libro: ["Lev√≠tico", "Deuteronomio", "N√∫meros", "Josu√©"],
      opciones_capitulo: ["18", "19", "20", "21"]
    },
    {
      cita: "Porque de tal manera am√≥ Dios al mundo, que ha dado a su Hijo unig√©nito.",
      libro: "Juan",
      capitulo: "3",
      opciones_libro: ["Mateo", "Marcos", "Lucas", "Juan"],
      opciones_capitulo: ["2", "3", "4", "5"]
    }
  ]
};

const selectBloque = document.getElementById('select-bloque');
const startBtn = document.getElementById('start-btn');
const quizContainer = document.getElementById('quiz-container');
const preguntaTexto = document.getElementById('pregunta-texto');
const opcionesLibroDiv = document.getElementById('opciones-libro');
const opcionesCapituloDiv = document.getElementById('opciones-capitulo');
const btnSiguiente = document.getElementById('btn-siguiente');
const resultContainer = document.getElementById('result-container');
const mensajeResultado = document.getElementById('mensaje-resultado');
const btnReiniciar = document.getElementById('btn-reiniciar');
const btnVolverInicio = document.getElementById('btn-volver-inicio');

const sonidoInicio = document.getElementById('sonido-inicio');
const sonidoCorrecto = document.getElementById('sonido-correcto');
const sonidoIncorrecto = document.getElementById('sonido-incorrecto');

let preguntas = [];
let preguntaIndex = 0;
let aciertosLibro = 0;
let aciertosCapitulo = 0;

// Llenar selector de bloques
function cargarBloques() {
  Object.keys(bloques).forEach(bloque => {
    const option = document.createElement('option');
    option.value = bloque;
    option.textContent = bloque;
    selectBloque.appendChild(option);
  });
}

// Habilitar bot√≥n cuando se elige bloque
selectBloque.addEventListener('change', () => {
  startBtn.disabled = !selectBloque.value;
});

// Al comenzar quiz
startBtn.addEventListener('click', () => {
  preguntas = bloques[selectBloque.value];
  preguntaIndex = 0;
  aciertosLibro = 0;
  aciertosCapitulo = 0;

  document.getElementById('inicio-container').style.display = 'none';
  quizContainer.style.display = 'block';
  resultContainer.style.display = 'none';
  mostrarPregunta();
  reproducirSonido(sonidoInicio);
});

// Mostrar pregunta actual
function mostrarPregunta() {
  btnSiguiente.disabled = true;
  const pregunta = preguntas[preguntaIndex];
  preguntaTexto.textContent = `Cita: "${pregunta.cita}"`;

  // Opciones libro
  opcionesLibroDiv.innerHTML = '';
  pregunta.opciones_libro.forEach((opcion, i) => {
    const id = `libro-${i}`;
    const div = document.createElement('div');
    div.className = 'opcion';
    div.innerHTML = `
      <input type="radio" name="libro" id="${id}" value="${opcion}">
      <label for="${id}">${opcion}</label>
    `;
    opcionesLibroDiv.appendChild(div);
  });

  // Opciones cap√≠tulo
  opcionesCapituloDiv.innerHTML = '';
  pregunta.opciones_capitulo.forEach((opcion, i) => {
    const id = `capitulo-${i}`;
    const div = document.createElement('div');
    div.className = 'opcion';
    div.innerHTML = `
      <input type="radio" name="capitulo" id="${id}" value="${opcion}">
      <label for="${id}">${opcion}</label>
    `;
    opcionesCapituloDiv.appendChild(div);
  });

  // Escuchar cambios para habilitar siguiente
  const radios = quizContainer.querySelectorAll('input[type=radio]');
  radios.forEach(radio => {
    radio.checked = false;
    radio.addEventListener('change', () => {
      const libroSeleccionado = quizContainer.querySelector('input[name=libro]:checked');
      const capituloSeleccionado = quizContainer.querySelector('input[name=capitulo]:checked');
      btnSiguiente.disabled = !(libroSeleccionado && capituloSeleccionado);
    });
  });
}

// Al dar click en siguiente
btnSiguiente.addEventListener('click', () => {
  const libroSeleccionado = quizContainer.querySelector('input[name=libro]:checked').value;
  const capituloSeleccionado = quizContainer.querySelector('input[name=capitulo]:checked').value;
  const pregunta = preguntas[preguntaIndex];

  // Validar y sumar aciertos
  if (libroSeleccionado === pregunta.libro) {
    aciertosLibro++;
    reproducirSonido(sonidoCorrecto);
  } else {
    reproducirSonido(sonidoIncorrecto);
  }
  if (capituloSeleccionado === pregunta.capitulo) {
    aciertosCapitulo++;
    reproducirSonido(sonidoCorrecto);
  } else {
    reproducirSonido(sonidoIncorrecto);
  }

  preguntaIndex++;

  if (preguntaIndex < preguntas.length) {
    mostrarPregunta();
  } else {
    mostrarResultado();
  }
});

// Mostrar resultado final
function mostrarResultado() {
  quizContainer.style.display = 'none';
  resultContainer.style.display = 'block';

  const total = preguntas.length;
  const porcentajeLibro = Math.round((aciertosLibro / total) * 100);
  const porcentajeCapitulo = Math.round((aciertosCapitulo / total) * 100);

  let mensaje = `Resultados finales:\n- Libros correctos: ${porcentajeLibro}%\n- Cap√≠tulos correctos: ${porcentajeCapitulo}%\n`;

  if (porcentajeLibro >= 80 && porcentajeCapitulo >= 80) {
    mensaje += "¬°Excelente conocimiento b√≠blico! üôå";
  } else if (porcentajeLibro >= 50 || porcentajeCapitulo >= 50) {
    mensaje += "Buen trabajo, sigue practicando. üìñ";
  } else {
    mensaje += "Necesitas seguir estudiando la Biblia. üìö";
  }

  mensajeResultado.textContent = mensaje;
}

// Bot√≥n reiniciar mismo bloque
btnReiniciar.addEventListener('click', () => {
  preguntaIndex = 0;
  aciertosLibro = 0;
  aciertosCapitulo = 0;
  resultContainer.style.display = 'none';
  quizContainer.style.display = 'block';
  mostrarPregunta();
  reproducirSonido(sonidoInicio);
});

// Bot√≥n volver a inicio
btnVolverInicio.addEventListener('click', () => {
  resultContainer.style.display = 'none';
  document.getElementById('inicio-container').style.display = 'block';
  startBtn.disabled = true;
  selectBloque.value = "";
});

// Funci√≥n para reproducir sonidos
function reproducirSonido(sonido) {
  try {
    sonido.currentTime = 0;
    sonido.play();
  } catch (e) {
    // Puede fallar si no hay interacci√≥n previa
    console.warn('No se pudo reproducir el sonido:', e);
  }
}

// Inicializar select con bloques al cargar la p√°gina
cargarBloques();

</script>

</body>
</html>
